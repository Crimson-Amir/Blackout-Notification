{"asctime": "2025-08-22 20:52:30,769", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "da1ca3d2506748f983affc159ac47543"}
{"asctime": "2025-08-22 20:52:34,895", "levelname": "ERROR", "message": "An error occurred in register_user:", "error": "[WinError 10061] No connection could be made because the target machine actively refused it", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\utils\\functional.py\", line 32, in __call__\n    return self.__value__\n           ^^^^^^^^^^^^^^\nAttributeError: 'ChannelPromise' object has no attribute '__value__'. Did you mean: '__call__'?\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 472, in _reraise_as_library_errors\n    yield\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 459, in _ensure_connection\n    return retry_over_time(\n        self._connection_factory, self.recoverable_connection_errors,\n    ...<2 lines>...\n        callback, timeout=timeout\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\utils\\functional.py\", line 318, in retry_over_time\n    return fun(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 938, in _connection_factory\n    self._connection = self._establish_connection()\n                       ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 860, in _establish_connection\n    conn = self.transport.establish_connection()\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\transport\\pyamqp.py\", line 203, in establish_connection\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\amqp\\connection.py\", line 324, in connect\n    self.transport.connect()\n    ~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\amqp\\transport.py\", line 132, in connect\n    self._connect(self.host, self.port, self.connect_timeout)\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\amqp\\transport.py\", line 187, in _connect\n    self.sock.connect(sa)\n    ~~~~~~~~~~~~~~~~~^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 17, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 39, in register_user\n    log_and_report_error(\n    ~~~~~~~~~~~~~~~~~~~~^\n        \"start: register_new_bot\", e,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        {\"first_name\": user_detail.first_name,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n         \"last_name\": user_detail.last_name, \"username\": user_detail.username, \"user_id\": user_detail.id})\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 19, in log_and_report_error\n    report_error.delay(context, error.__class__.__name__, str(error), extra)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\task.py\", line 444, in delay\n    return self.apply_async(args, kwargs)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\task.py\", line 601, in apply_async\n    return app.send_task(\n           ~~~~~~~~~~~~~^\n        self.name, args, kwargs, task_id=task_id, producer=producer,\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n        **options\n        ^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\base.py\", line 930, in send_task\n    amqp.send_task_message(P, name, message, **options)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\amqp.py\", line 523, in send_task_message\n    ret = producer.publish(\n        body,\n    ...<8 lines>...\n        **properties\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\messaging.py\", line 190, in publish\n    return _publish(\n        body, priority, content_type, content_encoding,\n        headers, properties, routing_key, mandatory, immediate,\n        exchange_name, declare, timeout, confirm_timeout, retry, retry_policy\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 556, in _ensured\n    return fun(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\messaging.py\", line 200, in _publish\n    channel = self.channel\n              ^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\messaging.py\", line 224, in _get_channel\n    channel = self._channel = channel()\n                              ~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\utils\\functional.py\", line 34, in __call__\n    value = self.__value__ = self.__contract__()\n                             ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\messaging.py\", line 240, in <lambda>\n    channel = ChannelPromise(lambda: connection.default_channel)\n                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 957, in default_channel\n    self._ensure_connection(**conn_opts)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 458, in _ensure_connection\n    with ctx():\n         ~~~^^\n  File \"C:\\Users\\SURFACE\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\kombu\\connection.py\", line 476, in _reraise_as_library_errors\n    raise ConnectionError(str(exc)) from exc\nkombu.exceptions.OperationalError: [WinError 10061] No connection could be made because the target machine actively refused it\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "051c9f9e1ab74282a2b40ee8615a0bee"}
{"asctime": "2025-08-22 20:56:31,645", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "2ad4b25a62be421784e57f634321cc41"}
{"asctime": "2025-08-22 20:58:07,040", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "2bebec6351da414e9b235b1dd64a82cc"}
{"asctime": "2025-08-22 21:05:08,794", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "e0ae9e744412456a8e99e59b29bceadb"}
{"asctime": "2025-08-22 21:10:07,607", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter_by(chat_id=chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "bd51a9dcf6d344039b38ac0ccb9b6f2c"}
{"asctime": "2025-08-22 21:13:43,071", "levelname": "ERROR", "message": "start: register_new_bot", "error": "(psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 118, in is_user_exist_in_bot\n    if crud.get_user(session, chat_id):\n       ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 14, in get_user\n    return session.query(model.UserDetail).filter(model.UserDetail.chat_id==chat_id).first()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"user_detail\" does not exist\nLINE 2: FROM user_detail \n             ^\n\n[SQL: SELECT user_detail.user_id AS user_detail_user_id, user_detail.username AS user_detail_username, user_detail.chat_id AS user_detail_chat_id, user_detail.active AS user_detail_active, user_detail.wallet AS user_detail_wallet, user_detail.register_date AS user_detail_register_date \nFROM user_detail \nWHERE user_detail.chat_id = %(chat_id_1)s \n LIMIT %(param_1)s]\n[parameters: {'chat_id_1': 6450325872, 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "16f15d745c18489c9a994bf0a7169028"}
{"asctime": "2025-08-22 21:25:19,991", "levelname": "ERROR", "message": "An error occurred in register_user:", "error": "'first_name' is an invalid keyword argument for UserDetail", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 121, in is_user_exist_in_bot\n    raise UserNotFound\nutilities.UserNotFound: user was't register in bot!\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 17, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 20, in register_user\n    crud.create_user(session, user_detail)\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 4, in create_user\n    user = model.UserDetail(\n        first_name=user_detail.first_name,\n    ...<2 lines>...\n        chat_id=user_detail.id,\n    )\n  File \"<string>\", line 4, in __init__\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state.py\", line 571, in _initialize_instance\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state.py\", line 569, in _initialize_instance\n    manager.original_init(*mixed[1:], **kwargs)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\decl_base.py\", line 2179, in _declarative_constructor\n    raise TypeError(\n        \"%r is an invalid keyword argument for %s\" % (k, cls_.__name__)\n    )\nTypeError: 'first_name' is an invalid keyword argument for UserDetail\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "250929ab1606423b9e40887e67ca5464"}
{"asctime": "2025-08-22 21:29:03,013", "levelname": "ERROR", "message": "start: register_new_bot", "error": "'dict' object has no attribute 'add'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 119, in is_user_exist_in_bot\n    users.add(chat_id)\n    ^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'add'\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "7b4c0ddd8f2e469684d32417190a3f3e"}
{"asctime": "2025-08-22 21:32:40,828", "levelname": "ERROR", "message": "An error occurred in register_user:", "error": "(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint \"user_detail_username_key\"\nDETAIL:  Key (username)=(SparklyDinosaur) already exists.\n\n[SQL: INSERT INTO user_detail (first_name, last_name, username, chat_id, active, wallet, register_date) VALUES (%(first_name)s, %(last_name)s, %(username)s, %(chat_id)s, %(active)s, %(wallet)s, %(register_date)s) RETURNING user_detail.user_id]\n[parameters: {'first_name': 'Amir', 'last_name': None, 'username': 'SparklyDinosaur', 'chat_id': 6450325872, 'active': True, 'wallet': 0, 'register_date': datetime.datetime(2025, 8, 22, 18, 2, 40, 805060, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 15, in register_user\n    await ustart(update, context, in_new_message, True)\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 88, in ustart\n    is_user_exist_in_bot(user_detail.id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 121, in is_user_exist_in_bot\n    raise UserNotFound\nutilities.UserNotFound: user was't register in bot!\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UniqueViolation: duplicate key value violates unique constraint \"user_detail_username_key\"\nDETAIL:  Key (username)=(SparklyDinosaur) already exists.\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 17, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\start.py\", line 20, in register_user\n    crud.create_user(session, user_detail)\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 11, in create_user\n    session.commit()\n    ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2032, in commit\n    trans.commit(_to_root=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"<string>\", line 2, in commit\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1313, in commit\n    self._prepare_impl()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"<string>\", line 2, in _prepare_impl\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\state_changes.py\", line 137, in _go\n    ret_value = fn(self, *arg, **kw)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 1288, in _prepare_impl\n    self.session.flush()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4345, in flush\n    self._flush(objects)\n    ~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4480, in _flush\n    with util.safe_reraise():\n         ~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\util\\langhelpers.py\", line 224, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 4441, in _flush\n    flush_context.execute()\n    ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 466, in execute\n    rec.execute(self)\n    ~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self.mapper,\n        ^^^^^^^^^^^^\n        uow.states_for_mapper_hierarchy(self.mapper, False, False),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        uow,\n        ^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        base_mapper,\n        ^^^^^^^^^^^^\n    ...<3 lines>...\n        insert,\n        ^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\persistence.py\", line 1233, in _emit_insert_statements\n    result = connection.execute(\n        statement,\n        params,\n        execution_options=execution_options,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint \"user_detail_username_key\"\nDETAIL:  Key (username)=(SparklyDinosaur) already exists.\n\n[SQL: INSERT INTO user_detail (first_name, last_name, username, chat_id, active, wallet, register_date) VALUES (%(first_name)s, %(last_name)s, %(username)s, %(chat_id)s, %(active)s, %(wallet)s, %(register_date)s) RETURNING user_detail.user_id]\n[parameters: {'first_name': 'Amir', 'last_name': None, 'username': 'SparklyDinosaur', 'chat_id': 6450325872, 'active': True, 'wallet': 0, 'register_date': datetime.datetime(2025, 8, 22, 18, 2, 40, 805060, tzinfo=datetime.timezone.utc)}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "09001b721d794c7ea6f1b54971ce0814"}
{"asctime": "2025-08-22 22:57:37,517", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "isinstance() arg 2 must be a type, a tuple of types, or a union", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 33, in get_bill_id\n    if not isinstance(int, user_bill_id):\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^\nTypeError: isinstance() arg 2 must be a type, a tuple of types, or a union\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "987d8b32f684469892ed2790bed0f255"}
{"asctime": "2025-08-22 23:01:42,514", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "(psycopg2.errors.UndefinedTable) relation \"tokens\" does not exist\nLINE 2: FROM tokens \n             ^\n\n[SQL: SELECT tokens.id AS tokens_id, tokens.token_name AS tokens_token_name, tokens.token AS tokens_token, tokens.register_date AS tokens_register_date \nFROM tokens \nWHERE tokens.token_name = %(token_name_1)s ORDER BY tokens.id DESC \n LIMIT %(param_1)s]\n[parameters: {'token_name_1': 'blackout_report_token', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\npsycopg2.errors.UndefinedTable: relation \"tokens\" does not exist\nLINE 2: FROM tokens \n             ^\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=self.get_header(), proxies=self.proxies)\n                                                   ~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 35, in get_header\n    cls.get_new_header()\n    ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 29, in get_new_header\n    token = crud.get_token(session, \"blackout_report_token\")\n  File \"C:\\Users\\Public\\Blackout Notification\\crud.py\", line 21, in get_token\n    .first()\n     ~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2759, in first\n    return self.limit(1)._iter().first()  # type: ignore\n           ~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\query.py\", line 2857, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n                                                  ~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n        params,\n        ^^^^^^^\n        execution_options={\"_sa_orm_load_options\": self.load_options},\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2365, in execute\n    return self._execute_internal(\n           ~~~~~~~~~~~~~~~~~~~~~~^\n        statement,\n        ^^^^^^^^^^\n    ...<4 lines>...\n        _add_event=_add_event,\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\session.py\", line 2251, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self,\n        ^^^^^\n    ...<4 lines>...\n        conn,\n        ^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\orm\\context.py\", line 306, in orm_execute_statement\n    result = conn.execute(\n        statement, params or {}, execution_options=execution_options\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1419, in execute\n    return meth(\n        self,\n        distilled_parameters,\n        execution_options or NO_OPTIONS,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 526, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        self, distilled_params, execution_options\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1641, in _execute_clauseelement\n    ret = self._execute_context(\n        dialect,\n    ...<8 lines>...\n        cache_hit=cache_hit,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\n    return self._exec_single_context(\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^\n        dialect, context, statement, parameters\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\n    self._handle_dbapi_exception(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        e, str_statement, effective_parameters, cursor, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\n    self.dialect.do_execute(\n    ~~~~~~~~~~~~~~~~~~~~~~~^\n        cursor, str_statement, effective_parameters, context\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 951, in do_execute\n    cursor.execute(statement, parameters)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"tokens\" does not exist\nLINE 2: FROM tokens \n             ^\n\n[SQL: SELECT tokens.id AS tokens_id, tokens.token_name AS tokens_token_name, tokens.token AS tokens_token, tokens.register_date AS tokens_register_date \nFROM tokens \nWHERE tokens.token_name = %(token_name_1)s ORDER BY tokens.id DESC \n LIMIT %(param_1)s]\n[parameters: {'token_name_1': 'blackout_report_token', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "fa122e9d0f4144a1901550da7b6dfea1"}
{"asctime": "2025-08-22 23:05:23,114", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "Missing dependencies for SOCKS support.", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 44, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 610, in send\n    conn = self.get_connection_with_tls_context(\n        request, verify, proxies=proxies, cert=cert\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 460, in get_connection_with_tls_context\n    proxy_manager = self.proxy_manager_for(proxy)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 258, in proxy_manager_for\n    manager = self.proxy_manager[proxy] = SOCKSProxyManager(\n                                          ~~~~~~~~~~~~~~~~~^\n        proxy,\n        ^^^^^^\n    ...<5 lines>...\n        **proxy_kwargs,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 63, in SOCKSProxyManager\n    raise InvalidSchema(\"Missing dependencies for SOCKS support.\")\nrequests.exceptions.InvalidSchema: Missing dependencies for SOCKS support.\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "fba25d9a4f1d48e8a7be9fb237f2313f"}
{"asctime": "2025-08-22 23:06:43,500", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x00000176ABA6F770>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:3000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x00000176ABA6F770>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x00000176ABA6F770>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 44, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x00000176ABA6F770>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "3cdfb2ea49624915911839b3a2acd65a"}
{"asctime": "2025-08-22 23:07:19,293", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "be47ed0980d34b1ebedcf07cb02a99c3"}
{"asctime": "2025-08-22 23:08:02,542", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=data, proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "93258c4eb35b45ff89ff043574b5df8f"}
{"asctime": "2025-08-22 23:08:31,770", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=data, proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "8a44e7078b864467a93230161712de36"}
{"asctime": "2025-08-22 23:09:07,783", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "Header part (<models.Tokens object at 0x0000015887792BA0>) from ('Authorization', <models.Tokens object at 0x0000015887792BA0>) must be of type str or bytes, not <class 'models.Tokens'>", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 44, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 575, in request\n    prep = self.prepare_request(req)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 484, in prepare_request\n    p.prepare(\n    ~~~~~~~~~^\n        method=request.method.upper(),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n        hooks=merge_hooks(request.hooks, self.hooks),\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 368, in prepare\n    self.prepare_headers(headers)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 490, in prepare_headers\n    check_header_validity(header)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\utils.py\", line 1032, in check_header_validity\n    _validate_header_part(header, value, 1)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\utils.py\", line 1041, in _validate_header_part\n    raise InvalidHeader(\n    ...<2 lines>...\n    )\nrequests.exceptions.InvalidHeader: Header part (<models.Tokens object at 0x0000015887792BA0>) from ('Authorization', <models.Tokens object at 0x0000015887792BA0>) must be of type str or bytes, not <class 'models.Tokens'>\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "848da3a2b4f24e4b91c06f210bf5dcc7"}
{"asctime": "2025-08-22 23:09:50,496", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, data=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "0ac37fcb0cad41aab104af600f71d786"}
{"asctime": "2025-08-22 23:11:59,698", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "b296247763da49248c496aa58d647fca"}
{"asctime": "2025-08-22 23:13:31,426", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(int(user_bill_id))\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 53, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "9e0fd78c7316478d8cad04286c712902"}
{"asctime": "2025-08-22 23:15:06,259", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 52, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 45, in make_request\n    response.raise_for_status()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://uiapi2.saapa.ir/api/ebills/GetPowerBillData\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "90c3e53c314f45739d0ecdf2c6eb7c02"}
{"asctime": "2025-08-22 23:15:40,321", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "'dict' object has no attribute 'json'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 53, in get_bill_id\n    msg = f\"{data.json()}\"\n             ^^^^^^^^^\nAttributeError: 'dict' object has no attribute 'json'\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "d8213ef590d5444f8b3b9da79038dd85"}
{"asctime": "2025-08-22 23:16:04,468", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "Can't parse inline keyboard button: can't find field \"text\"", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 55, in get_bill_id\n    await context.bot.send_message(chat_id=user_detail.id, text=msg, reply_markup=InlineKeyboardMarkup(key))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 3055, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 1100, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 630, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 810, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 374, in _request_wrapper\n    raise exception\ntelegram.error.BadRequest: Can't parse inline keyboard button: can't find field \"text\"\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "e84c6bef4ab5464e88c7d754cd151246"}
{"asctime": "2025-08-22 23:28:11,830", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001A5B62B3620>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:3000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001A5B62B3620>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001A5B62B3620>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 52, in get_bill_id\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 82, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 74, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001A5B62B3620>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "dca3e8009be1460d84af7e75b4b25a3a"}
{"asctime": "2025-08-23 16:29:58,802", "levelname": "ERROR", "message": "An error occurred in get_bill_id:", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000013BF1D3C830>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:3000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000013BF1D3C830>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000013BF1D3C830>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 49, in get_bill_id\n    tasks.send_bill_message(user_detail.id, int(user_bill_id), msg.message_id)\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\local.py\", line 182, in __call__\n    return self._get_current_object()(*a, **kw)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\task.py\", line 411, in __call__\n    return self.run(*args, **kwargs)\n           ~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\autoretry.py\", line 60, in run\n    ret = task.retry(exc=exc, **retry_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\task.py\", line 727, in retry\n    raise_with_context(exc or Retry('Task can be retried', None))\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\celery\\app\\autoretry.py\", line 38, in run\n    return task._orig_run(*args, **kwargs)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 68, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000013BF1D3C830>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "b320951ab8224527b43ecb1e7b11e12a"}
{"asctime": "2025-08-23 16:30:24,694", "levelname": "ERROR", "message": "An error occurred in ask_for_bill_id:", "error": "Timed out", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        pool_request.request\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 101, in handle_async_request\n    raise exc\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 78, in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 156, in _connect\n    stream = await stream.start_tls(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_backends\\anyio.py\", line 67, in start_tls\n    with map_exceptions(exc_map):\n         ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\SURFACE\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.ConnectTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 273, in do_request\n    res = await self._client.request(\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1540, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\SURFACE\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.ConnectTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 37, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 27, in ask_for_bill_id\n    await context.bot.send_message(text=msg, chat_id=user_detail.id, parse_mode='html', reply_markup=InlineKeyboardMarkup(key))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 3055, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 1100, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 630, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 810, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 304, in _request_wrapper\n    code, payload = await self.do_request(\n                    ^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 290, in do_request\n    raise TimedOut from err\ntelegram.error.TimedOut: Timed out\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "b1b18ff66a294d1ab62db75464f1ca54"}
{"asctime": "2025-08-23 20:10:53,166", "levelname": "ERROR", "message": "An error occurred in my_bill_ids:", "error": "'CallbackQuery' object has no attribute 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 15, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 83, in my_bill_ids\n    tasks.get_all_user_bill_ids.delay(user_detail.id, query.message_id)\n                                                      ^^^^^^^^^^^^^^^^\nAttributeError: 'CallbackQuery' object has no attribute 'message_id'. Did you mean: 'message'?\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "fde003d5be9f442d9ab5db26f58232ca"}
{"asctime": "2025-08-23 20:55:19,017", "levelname": "ERROR", "message": "An error occurred in my_bill_ids:", "error": "Query is too old and response timeout expired or query id is invalid", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 15, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 82, in my_bill_ids\n    await query.answer(text.get(\"wait\", \"wait\"))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_callbackquery.py\", line 187, in answer\n    return await self.get_bot().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 960, in answer_callback_query\n    return await super().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4191, in answer_callback_query\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 374, in _request_wrapper\n    raise exception\ntelegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "fc8a664dbe0b4d239727f51893222c41"}
{"asctime": "2025-08-23 20:55:19,792", "levelname": "ERROR", "message": "An error occurred in my_bill_ids:", "error": "Query is too old and response timeout expired or query id is invalid", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 15, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 82, in my_bill_ids\n    await query.answer(text.get(\"wait\", \"wait\"))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_callbackquery.py\", line 187, in answer\n    return await self.get_bot().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 960, in answer_callback_query\n    return await super().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4191, in answer_callback_query\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 374, in _request_wrapper\n    raise exception\ntelegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "10354f3008984050821584ccf584baf6"}
{"asctime": "2025-08-23 21:10:14,308", "levelname": "ERROR", "message": "An error occurred in my_bill_ids:", "error": "Query is too old and response timeout expired or query id is invalid", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 15, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 82, in my_bill_ids\n    await query.answer(text.get(\"wait\", \"wait\"))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_callbackquery.py\", line 187, in answer\n    return await self.get_bot().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 960, in answer_callback_query\n    return await super().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4191, in answer_callback_query\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 374, in _request_wrapper\n    raise exception\ntelegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "025be8ed78944e02b6850c2f669ecfc8"}
{"asctime": "2025-08-23 21:10:14,770", "levelname": "ERROR", "message": "An error occurred in my_bill_ids:", "error": "Query is too old and response timeout expired or query id is invalid", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 15, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 82, in my_bill_ids\n    await query.answer(text.get(\"wait\", \"wait\"))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_callbackquery.py\", line 187, in answer\n    return await self.get_bot().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 960, in answer_callback_query\n    return await super().answer_callback_query(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<10 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 4191, in answer_callback_query\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 374, in _request_wrapper\n    raise exception\ntelegram.error.BadRequest: Query is too old and response timeout expired or query id is invalid\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "ddc1c73db4f44cea8ee16405062f5a35"}
{"asctime": "2025-08-23 22:19:56,083", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A447E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A447E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A447E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 86, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A447E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "task_args": [6450325872, 7792398404423, 313], "task_kwargs": {}, "error_id": "dcf6efbaec064a0580a40ad14d52063c"}
{"asctime": "2025-08-23 22:20:03,218", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DA710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DA710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DA710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 86, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DA710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "task_args": [6450325872, 7792398404423, 313], "task_kwargs": {}, "error_id": "89fcd0bb6563478ab06abd9870f62322"}
{"asctime": "2025-08-23 22:20:10,288", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DAFD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DAFD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DAFD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 86, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DAFD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "task_args": [6450325872, 7792398404423, 313], "task_kwargs": {}, "error_id": "d2d47d0eedcb4bcd924d9f0041d711f2"}
{"asctime": "2025-08-23 22:20:17,351", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DBED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DBED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DBED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 86, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002066A4DBED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "task_args": [6450325872, 7792398404423, 313], "task_kwargs": {}, "error_id": "d2a31341f5de4bea99e582af5deaafff"}
{"asctime": "2025-08-23 22:28:22,801", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D213777E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D213777E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D213777E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D213777E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 317], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "4fcb95f8402446679ab5f9cab8e6a090"}
{"asctime": "2025-08-23 22:28:29,892", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380E5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380E5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380E5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380E5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 317], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "e682da2470b8475297ce16ad48b7bdc8"}
{"asctime": "2025-08-23 22:28:36,961", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380EE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380EE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380EE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380EE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 317], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "8271f784829f48898da218b9c5ce66c4"}
{"asctime": "2025-08-23 22:28:44,012", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380FED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380FED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380FED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001D21380FED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 317], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "50c1b7ed5ae04961bfe8f462cd8e610f"}
{"asctime": "2025-08-23 22:29:40,360", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000028711787E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000028711787E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000028711787E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000028711787E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 321], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "ef4b944260eb4b3fbb37d934c3052768"}
{"asctime": "2025-08-23 22:29:47,490", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181A5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181A5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181A5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181A5D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 321], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "bc286002da88499c839d6474c393beaa"}
{"asctime": "2025-08-23 22:29:54,582", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181AE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181AE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181AE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181AE90>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 321], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "c65d51ef67704e22990484f09f396ff3"}
{"asctime": "2025-08-23 22:30:01,646", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181BED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181BED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181BED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000002871181BED0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "task_args": [7792398404423, 321], "task_kwargs": {}, "retries": null, "max_retries": null, "error_id": "d6a6cba96cfd4959980f266dd0a4d5f4"}
{"asctime": "2025-08-23 22:30:40,237", "levelname": "ERROR", "message": "An error occurred in ask_for_bill_id:", "error": "Timed out", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        pool_request.request\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 101, in handle_async_request\n    raise exc\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 78, in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_async\\connection.py\", line 156, in _connect\n    stream = await stream.start_tls(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_backends\\anyio.py\", line 67, in start_tls\n    with map_exceptions(exc_map):\n         ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\SURFACE\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpcore\\_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.ConnectTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 273, in do_request\n    res = await self._client.request(\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1540, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n         ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\SURFACE\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\httpx\\_transports\\default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.ConnectTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\utilities.py\", line 35, in wrapper\n    return await func(update, context, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\manage.py\", line 25, in ask_for_bill_id\n    await context.bot.send_message(text=msg, chat_id=user_detail.id, parse_mode='html', reply_markup=InlineKeyboardMarkup(key))\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 3055, in send_message\n    return await super().send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 1100, in send_message\n    return await self._send_message(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<19 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 630, in _send_message\n    result = await super()._send_message(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<21 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 810, in _send_message\n    result = await self._post(\n             ^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 698, in _post\n    return await self._do_post(\n           ^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\ext\\_extbot.py\", line 370, in _do_post\n    return await super()._do_post(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\_bot.py\", line 727, in _do_post\n    result = await request.post(\n             ^^^^^^^^^^^^^^^^^^^\n    ...<6 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 197, in post\n    result = await self._request_wrapper(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_baserequest.py\", line 304, in _request_wrapper\n    code, payload = await self.do_request(\n                    ^^^^^^^^^^^^^^^^^^^^^^\n    ...<7 lines>...\n    )\n    ^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\telegram\\request\\_httpxrequest.py\", line 290, in do_request\n    raise TimedOut from err\ntelegram.error.TimedOut: Timed out\n", "first_name": "Amir", "last_name": null, "username": "SparklyDinosaur", "user_id": 6450325872, "error_id": "2ba181bb8ccf47e7abf7be37adb64dd2"}
{"asctime": "2025-08-23 22:37:55,654", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 76, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "a85c5822ca404283910c2e49c107f833"}
{"asctime": "2025-08-23 22:37:56,258", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 76, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 0, "max_retries": 3, "error_id": "701544beb3c8427b8580652efa92f99e"}
{"asctime": "2025-08-23 22:38:01,266", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 76, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 1, "max_retries": 3, "error_id": "08964a754da945ccbb27e258f170b157"}
{"asctime": "2025-08-23 22:38:06,273", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 76, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 2, "max_retries": 3, "error_id": "5a81260f1bcb4b258a7e97a994bf9f9b"}
{"asctime": "2025-08-23 22:38:11,282", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 76, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "9311a63119884c25a0369088eefc567b"}
{"asctime": "2025-08-23 22:41:57,163", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 0, "max_retries": 3, "error_id": "2e214df852964f69aa6fe233dad98589"}
{"asctime": "2025-08-23 22:42:02,248", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 1, "max_retries": 3, "error_id": "298014a9f2044e5b937269a38ab8c8af"}
{"asctime": "2025-08-23 22:42:07,256", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 2, "max_retries": 3, "error_id": "c1f1fb886da0469db9d39066c0f11315"}
{"asctime": "2025-08-23 22:42:12,261", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "send_bill_message() missing 1 required positional argument: 'message_id'", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, *args, **kwargs)\nTypeError: send_bill_message() missing 1 required positional argument: 'message_id'\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "13c5f2e8e4e4417d881f39b1ccb7ba1d"}
{"asctime": "2025-08-23 22:44:26,716", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id *args, **kwargs)\n                      ~~~~~~~~^~~~~\nMemoryError\n", "chat_id": 6450325872, "retries": 0, "max_retries": 3, "error_id": "018e59130946488ea5037e4af1ab8770"}
{"asctime": "2025-08-23 22:44:31,741", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id *args, **kwargs)\n                      ~~~~~~~~^~~~~\nMemoryError\n", "chat_id": 6450325872, "retries": 1, "max_retries": 3, "error_id": "75bde3f0c5f44f85aedeabfe4de4fc9a"}
{"asctime": "2025-08-23 22:44:36,754", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id *args, **kwargs)\n                      ~~~~~~~~^~~~~\nMemoryError\n", "chat_id": 6450325872, "retries": 2, "max_retries": 3, "error_id": "538923678a7940469aa722558e93ca35"}
{"asctime": "2025-08-23 22:44:41,774", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id *args, **kwargs)\n                      ~~~~~~~~^~~~~\nMemoryError\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "7e84a028deeb44c7b04f0f27ca3dca17"}
{"asctime": "2025-08-23 22:46:19,805", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB6737E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB6737E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB6737E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB6737E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 0, "max_retries": 3, "error_id": "3c17608b5cbb4a128e26ee53817d512f"}
{"asctime": "2025-08-23 22:46:26,935", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B2710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B2710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B2710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B2710>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 1, "max_retries": 3, "error_id": "9b65d46886ab4de890240cf8e7750a35"}
{"asctime": "2025-08-23 22:46:34,031", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3110>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3110>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3110>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3110>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 2, "max_retries": 3, "error_id": "63f111b90045460283a5d9c88d6e9ee6"}
{"asctime": "2025-08-23 22:46:41,108", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3C50>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3C50>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3C50>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 73, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 108, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x0000020DB67B3C50>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "c09a7de4c9e64bdcaac8b55d185ef309"}
{"asctime": "2025-08-23 22:48:23,421", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7BA3E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7BA3E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7BA3E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 74, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7BA3E00>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 0, "max_retries": 3, "error_id": "de58f9ea8e964e8299dcc25c39399dfa"}
{"asctime": "2025-08-23 22:48:30,550", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2AAD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2AAD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2AAD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 74, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2AAD0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 1, "max_retries": 3, "error_id": "2725c589db8344d99ab7e1dc39af0c35"}
{"asctime": "2025-08-23 22:48:37,638", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2B4D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2B4D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2B4D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 74, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D7C2B4D0>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 2, "max_retries": 3, "error_id": "feeeb245b8c347ed94f1b2a13edd3b38"}
{"asctime": "2025-08-23 22:48:44,730", "levelname": "ERROR", "message": "Celery task: send_bill_message", "error": "SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D8208690>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))", "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 787, in connect\n    super(socksocket, self).connect(proxy_addr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 110, in _new_conn\n    conn = socks.create_connection(\n        (self.host, self.port),\n    ...<7 lines>...\n        **extra_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 209, in create_connection\n    raise err\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 199, in create_connection\n    sock.connect((remote_host, remote_port))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 47, in wrapper\n    return function(*args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\socks.py\", line 800, in connect\n    raise ProxyConnectionError(msg, error)\nsocks.ProxyConnectionError: Error connecting to SOCKS5 proxy 127.0.0.1:50000: [WinError 10061] No connection could be made because the target machine actively refused it\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\n    response = self._make_request(\n        conn,\n    ...<10 lines>...\n        **response_kw,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 488, in _make_request\n    raise new_e\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 464, in _make_request\n    self._validate_conn(conn)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 1093, in _validate_conn\n    conn.connect()\n    ~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connection.py\", line 753, in connect\n    self.sock = sock = self._new_conn()\n                       ~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\contrib\\socks.py\", line 141, in _new_conn\n    raise NewConnectionError(\n        self, f\"Failed to establish a new connection: {error}\"\n    )\nurllib3.exceptions.NewConnectionError: <urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D8208690>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 644, in send\n    resp = conn.urlopen(\n        method=request.method,\n    ...<9 lines>...\n        chunked=chunked,\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\connectionpool.py\", line 841, in urlopen\n    retries = retries.increment(\n        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]\n    )\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\urllib3\\util\\retry.py\", line 519, in increment\n    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nurllib3.exceptions.MaxRetryError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D8208690>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 74, in wrapper\n    return func(self, chat_id, *args, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\tasks.py\", line 109, in send_bill_message\n    data = GetAPI().get_power_bill_data(user_bill_id)\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 81, in get_power_bill_data\n    return self.make_request('post', url=url, json=data, headers=self.get_header(), proxies=self.proxies)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\Public\\Blackout Notification\\core.py\", line 73, in make_request\n    response = self.session.request(method, url, timeout=timeout, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 589, in request\n    resp = self.send(prep, **send_kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\sessions.py\", line 703, in send\n    r = adapter.send(request, **kwargs)\n  File \"C:\\Users\\Public\\Blackout Notification\\.venv\\Lib\\site-packages\\requests\\adapters.py\", line 677, in send\n    raise ConnectionError(e, request=request)\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host='uiapi2.saapa.ir', port=443): Max retries exceeded with url: /api/ebills/GetPowerBillData (Caused by NewConnectionError('<urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x000001C8D8208690>: Failed to establish a new connection: [WinError 10061] No connection could be made because the target machine actively refused it'))\n", "chat_id": 6450325872, "retries": 3, "max_retries": 3, "error_id": "118f7c1e8919491db612f468f8f4b40c"}
